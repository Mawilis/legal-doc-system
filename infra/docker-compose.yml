/**
 * Copyright (c) 2025 Wilsy Pty Ltd [Reg: 2024/617944/07].
 * All Rights Reserved.
 * * This software is the confidential and proprietary information of Wilsy Pty Ltd.
 * Unauthorized copying of this file, via any medium is strictly prohibited.
 * Proprietary and confidential.
 */

version: '3.8'
services:
  # EVENT BUS (Kafka) - The Nervous System
  zookeeper:
    image: confluentinc/cp-zookeeper:7.4.0
    environment:
      ZOOKEEPER_CLIENT_PORT: 2181
    ports: ['2181:2181']

  kafka:
    image: confluentinc/cp-kafka:7.4.0
    depends_on: [zookeeper]
    environment:
      KAFKA_BROKER_ID: 1
      KAFKA_ZOOKEEPER_CONNECT: zookeeper:2181
      KAFKA_ADVERTISED_LISTENERS: PLAINTEXT://localhost:9092
      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: 1
    ports: ['9092:9092']

  # CACHE & QUEUE - Speed Layer
  redis:
    image: redis:7
    ports: ['6379:6379']

  # DOCUMENT STORAGE (S3 Compatible) - The Vault
  minio:
    image: minio/minio:RELEASE.2024-01-01T00-00-00Z
    command: server /data
    environment:
      MINIO_ROOT_USER: admin
      MINIO_ROOT_PASSWORD: password123
    ports: ['9000:9000','9001:9001']
    volumes: ['miniodata:/data']

volumes:
  miniodata:
