# ====================================================================
# SARS TAX PRACTITIONER REGISTRATION FORM
# ====================================================================
# @file: server/docs/forms/sars-tax-practitioner-form.yml
# @version: 6.0.1
# @author: Wilson Khanyezi - Chief Quantum Sentinel
# @date: 2026-02-15
# 
# @description:
#   COMPREHENSIVE TAX PRACTITIONER REGISTRATION FORM FOR SARS eFILING
#   This form captures all required practitioner information for SARS
#   integration, including registration details, practice information,
#   and compliance declarations.
# 
# @regulatoryReferences:
#   - Tax Administration Act 28 of 2011, Section 240
#   - Tax Administration Act, Section 46 (Electronic Filing)
#   - POPIA Section 19-20 (Personal Data Protection)
# ====================================================================

form:
  id: sars-tax-practitioner-registration
  version: 6.0.1
  type: REGISTRATION
  jurisdiction: ZA
  retentionPolicy: tax_act_5_years
  dataResidency: ZA

metadata:
  title: SARS Tax Practitioner Registration Form
  description: Official registration form for SARS eFiling tax practitioners
  version: 6.0.1
  lastUpdated: 2026-02-15
  department: TAX_ADMINISTRATION
  owner: Wilson Khanyezi
  classification: CONFIDENTIAL

sections:
  - id: practitioner_details
    title: Practitioner Details
    description: Primary tax practitioner information
    fields:
      - name: practitionerId
        type: string
        label: SARS Practitioner ID
        required: true
        pattern: '^PRA\d{10}$'
        validationMessage: Practitioner ID must start with PRA followed by 10 digits
        example: PRA1234567890
        
      - name: practitionerType
        type: select
        label: Practitioner Type
        required: true
        options:
          - INDIVIDUAL
          - FIRM
          - COMPANY
          - TRUST
        default: INDIVIDUAL
        
      - name: registrationNumber
        type: string
        label: Professional Registration Number
        required: true
        pattern: '^\d{8,15}$'
        validationMessage: Registration number must be 8-15 digits
        example: 87654321
        
      - name: registrationBody
        type: select
        label: Registration Body
        required: true
        options:
          - SAICA
          - SAIPA
          - ACCA
          - CIMA
          - LSSA
          - OTHER
          
      - name: registrationDate
        type: date
        label: Registration Date
        required: true
        format: YYYY-MM-DD
        validationMessage: Date must be in YYYY-MM-DD format
        
      - name: expiryDate
        type: date
        label: Registration Expiry Date
        required: true
        format: YYYY-MM-DD
        validationMessage: Date must be in YYYY-MM-DD format

  - id: personal_information
    title: Personal Information
    description: Practitioner's personal details
    fields:
      - name: firstName
        type: string
        label: First Name
        required: true
        minLength: 2
        maxLength: 50
        validationMessage: First name must be 2-50 characters
        
      - name: lastName
        type: string
        label: Last Name
        required: true
        minLength: 2
        maxLength: 50
        validationMessage: Last name must be 2-50 characters
        
      - name: idNumber
        type: string
        label: South African ID Number
        required: true
        pattern: '^\d{13}$'
        validationMessage: ID number must be 13 digits
        sensitive: true
        redactionLevel: HIGH
        
      - name: dateOfBirth
        type: date
        label: Date of Birth
        required: true
        format: YYYY-MM-DD
        validationMessage: Date must be in YYYY-MM-DD format
        sensitive: true
        redactionLevel: MEDIUM
        
      - name: nationality
        type: select
        label: Nationality
        required: true
        options:
          - SOUTH_AFRICAN
          - OTHER
        default: SOUTH_AFRICAN
        
      - name: passportNumber
        type: string
        label: Passport Number (if non-SA)
        required: false
        pattern: '^[A-Z0-9]{6,15}$'
        validationMessage: Passport number must be 6-15 alphanumeric characters
        sensitive: true
        redactionLevel: HIGH

  - id: contact_information
    title: Contact Information
    description: Practitioner contact details
    fields:
      - name: email
        type: email
        label: Email Address
        required: true
        pattern: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
        validationMessage: Invalid email address format
        
      - name: phoneMobile
        type: string
        label: Mobile Phone Number
        required: true
        pattern: '^0[6-8][0-9]{8}$'
        validationMessage: Invalid SA mobile number format
        example: 0821234567
        
      - name: phoneWork
        type: string
        label: Work Phone Number
        required: false
        pattern: '^0[1-9][0-9]{8}$'
        validationMessage: Invalid SA phone number format
        
      - name: phoneFax
        type: string
        label: Fax Number
        required: false
        pattern: '^0[1-9][0-9]{8}$'
        validationMessage: Invalid SA fax number format

  - id: practice_information
    title: Practice Information
    description: Details of the tax practice
    fields:
      - name: practiceName
        type: string
        label: Practice/Firm Name
        required: true
        minLength: 2
        maxLength: 100
        validationMessage: Practice name must be 2-100 characters
        
      - name: practiceType
        type: select
        label: Practice Type
        required: true
        options:
          - SOLE_PROPRIETOR
          - PARTNERSHIP
          - CLOSE_CORPORATION
          - PRIVATE_COMPANY
          - PUBLIC_COMPANY
          - NON_PROFIT
        default: SOLE_PROPRIETOR
        
      - name: registrationNumber
        type: string
        label: Company/CC Registration Number
        required: false
        pattern: '^\d{4}\/\d{4,10}\/\d{2}$'
        validationMessage: Invalid company registration number format
        example: 2023/123456/07
        
      - name: vatNumber
        type: string
        label: VAT Registration Number
        required: false
        pattern: '^\d{10}$'
        validationMessage: VAT number must be 10 digits
        example: 4123456789
        
      - name: payrollNumber
        type: string
        label: PAYE Reference Number
        required: false
        pattern: '^\d{8}$'
        validationMessage: PAYE reference must be 8 digits
        example: 87654321
        
      - name: uifNumber
        type: string
        label: UIF Reference Number
        required: false
        pattern: '^\d{8}$'
        validationMessage: UIF reference must be 8 digits
        example: 12345678
        
      - name: sdlNumber
        type: string
        label: SDL Reference Number
        required: false
        pattern: '^\d{8}$'
        validationMessage: SDL reference must be 8 digits
        example: 87654321

  - id: business_address
    title: Business Address
    description: Physical and postal address
    fields:
      - name: addressLine1
        type: string
        label: Address Line 1
        required: true
        maxLength: 100
        validationMessage: Address line 1 cannot exceed 100 characters
        
      - name: addressLine2
        type: string
        label: Address Line 2
        required: false
        maxLength: 100
        validationMessage: Address line 2 cannot exceed 100 characters
        
      - name: suburb
        type: string
        label: Suburb
        required: true
        maxLength: 50
        validationMessage: Suburb cannot exceed 50 characters
        
      - name: city
        type: string
        label: City/Town
        required: true
        maxLength: 50
        validationMessage: City cannot exceed 50 characters
        
      - name: province
        type: select
        label: Province
        required: true
        options:
          - EASTERN_CAPE
          - FREE_STATE
          - GAUTENG
          - KWAZULU_NATAL
          - LIMPOPO
          - MPUMALANGA
          - NORTH_WEST
          - NORTHERN_CAPE
          - WESTERN_CAPE
          
      - name: postalCode
        type: string
        label: Postal Code
        required: true
        pattern: '^\d{4}$'
        validationMessage: Postal code must be 4 digits
        
      - name: country
        type: string
        label: Country
        required: true
        default: SOUTH_AFRICA
        options:
          - SOUTH_AFRICA
          - OTHER
          
      - name: postalAddress
        type: text
        label: Postal Address (if different)
        required: false
        maxLength: 200
        validationMessage: Postal address cannot exceed 200 characters

  - id: professional_qualifications
    title: Professional Qualifications
    description: Academic and professional qualifications
    fields:
      - name: qualifications
        type: array
        label: Qualifications
        minItems: 1
        maxItems: 10
        items:
          - name: qualificationName
            type: string
            label: Qualification Name
            required: true
            maxLength: 100
            
          - name: institution
            type: string
            label: Institution
            required: true
            maxLength: 100
            
          - name: yearObtained
            type: number
            label: Year Obtained
            required: true
            min: 1950
            max: 2100
            
          - name: certificateNumber
            type: string
            label: Certificate Number
            required: true
            maxLength: 50
            
          - name: expiryDate
            type: date
            label: Expiry Date (if applicable)
            required: false
            format: YYYY-MM-DD

  - id: tax_specializations
    title: Tax Specializations
    description: Areas of tax specialization
    fields:
      - name: specializations
        type: multiselect
        label: Specializations
        required: true
        minSelected: 1
        maxSelected: 10
        options:
          - INDIVIDUAL_TAX
          - CORPORATE_TAX
          - VAT
          - PAYE
          - CAPITAL_GAINS_TAX
          - ESTATE_PLANNING
          - TRUST_TAX
          - INTERNATIONAL_TAX
          - TAX_LITIGATION
          - TAX_COMPLIANCE
          - TRANSFER_PRICING
          - CUSTOMS_AND_EXCISE
          
      - name: yearsExperience
        type: number
        label: Years of Tax Experience
        required: true
        min: 0
        max: 70
        default: 0
        
      - name: clientCount
        type: number
        label: Number of Tax Clients
        required: true
        min: 0
        max: 10000
        default: 0
        
      - name: annualTurnover
        type: number
        label: Annual Turnover (ZAR)
        required: true
        min: 0
        format: currency
        currency: ZAR

  - id: declarations
    title: Declarations
    description: Legal declarations and consent
    fields:
      - name: taxComplianceStatus
        type: select
        label: Tax Compliance Status
        required: true
        options:
          - COMPLIANT
          - NON_COMPLIANT
          - UNDER_AUDIT
          - OBJECTION_FILED
          - APPEAL_FILED
        default: COMPLIANT
        
      - name: hasOutstandingTax
        type: boolean
        label: Do you have any outstanding tax debt?
        required: true
        default: false
        
      - name: outstandingTaxAmount
        type: number
        label: Outstanding Tax Amount (if yes)
        required: false
        min: 0
        format: currency
        currency: ZAR
        
      - name: hasBeenAudited
        type: boolean
        label: Have you ever been audited by SARS?
        required: true
        default: false
        
      - name: auditOutcome
        type: select
        label: Audit Outcome (if audited)
        required: false
        options:
          - NO_ADJUSTMENTS
          - ADJUSTMENTS_AGREED
          - ADJUSTMENTS_DISPUTED
          - PENALTIES_IMPOSED
          - UNDER_OBJECTION
          
      - name: hasCriminalRecord
        type: boolean
        label: Do you have any criminal record related to tax matters?
        required: true
        default: false
        
      - name: criminalRecordDetails
        type: text
        label: Criminal Record Details (if yes)
        required: false
        maxLength: 500
        validationMessage: Details cannot exceed 500 characters
        
      - name: consentToVerification
        type: boolean
        label: I consent to SARS verifying all information provided
        required: true
        default: false
        
      - name: consentToDataProcessing
        type: boolean
        label: I consent to Wilsy OS processing this data for tax compliance
        required: true
        default: false
        
      - name: popiaConsent
        type: boolean
        label: I consent to my personal information being processed as per POPIA
        required: true
        default: false

  - id: supporting_documents
    title: Supporting Documents
    description: Required supporting documentation
    fields:
      - name: documents
        type: fileUpload
        label: Upload Required Documents
        required: true
        maxFiles: 20
        maxFileSize: 10485760 # 10MB
        acceptedTypes:
          - application/pdf
          - image/jpeg
          - image/png
          - application/msword
          - application/vnd.openxmlformats-officedocument.wordprocessingml.document
        documents:
          - name: idDocument
            label: Certified ID/Passport Copy
            required: true
            description: Certified copy of ID document or passport
            
          - name: proofOfRegistration
            label: Proof of Professional Registration
            required: true
            description: Certificate from SAICA/SAIPA/ACCA/etc.
            
          - name: taxClearanceCertificate
            label: Tax Clearance Certificate
            required: false
            description: Recent SARS tax clearance certificate
            
          - name: proofOfAddress
            label: Proof of Business Address
            required: true
            description: Utility bill or bank statement (last 3 months)
            
          - name: curriculumVitae
            label: Curriculum Vitae
            required: true
            description: Detailed CV with experience and qualifications
            
          - name: declarationForm
            label: Signed Declaration Form
            required: true
            description: Completed and signed declaration form

  - id: audit_trail
    title: Audit Trail
    description: Form submission audit information
    fields:
      - name: submissionId
        type: string
        label: Submission ID
        autoGenerated: true
        format: 'SARS-FORM-{timestamp}-{random}'
        
      - name: submittedAt
        type: datetime
        label: Submission Date/Time
        autoGenerated: true
        format: ISO8601
        
      - name: submittedBy
        type: string
        label: Submitted By
        autoGenerated: true
        source: userContext
        
      - name: tenantId
        type: string
        label: Tenant ID
        autoGenerated: true
        source: tenantContext
        
      - name: ipAddress
        type: string
        label: IP Address
        autoGenerated: true
        source: requestContext
        sensitive: true
        redactionLevel: MEDIUM
        
      - name: userAgent
        type: string
        label: User Agent
        autoGenerated: true
        source: requestContext
        sensitive: true
        redactionLevel: LOW
        
      - name: forensicHash
        type: string
        label: Forensic Hash
        autoGenerated: true
        algorithm: SHA256
        
      - name: retentionPolicy
        type: string
        label: Retention Policy
        default: tax_act_5_years
        autoGenerated: true
        
      - name: dataResidency
        type: string
        label: Data Residency
        default: ZA
        autoGenerated: true

workflow:
  steps:
    - name: validation
      description: Validate all form fields
      required: true
      autoProcess: true
      
    - name: redaction
      description: Redact sensitive information
      required: true
      autoProcess: true
      
    - name: storage
      description: Store form data
      required: true
      autoProcess: true
      
    - name: notification
      description: Send confirmation notification
      required: true
      autoProcess: true
      
    - name: sarsSubmission
      description: Submit to SARS
      required: false
      autoProcess: false
      requiresApproval: true
      
    - name: verification
      description: Verify with SARS
      required: false
      autoProcess: false
      schedule: '0 0 * * *' # Daily

notifications:
  onSubmission:
    - type: EMAIL
      recipient: SUBMITTER
      template: sars-form-submission-confirmation
      
    - type: EMAIL
      recipient: ADMIN
      template: sars-form-submission-admin
      
  onApproval:
    - type: EMAIL
      recipient: SUBMITTER
      template: sars-form-approval-confirmation
      
  onRejection:
    - type: EMAIL
      recipient: SUBMITTER
      template: sars-form-rejection-notification
      includeReason: true

retention:
  policy: tax_act_5_years
  startDate: submissionDate
  expiryCalculation: submissionDate + 5 years
  legalHoldSupported: true
  autoDelete: false

security:
  encryption:
    atRest: AES-256-GCM
    inTransit: TLS 1.3
  dataClassification: CONFIDENTIAL
  accessControl:
    - role: SUBMITTER
      permissions: [READ_OWN, UPDATE_OWN]
    - role: ADMIN
      permissions: [READ_ALL, UPDATE_ALL, DELETE]
    - role: AUDITOR
      permissions: [READ_ALL]
    - role: SARS_OFFICIAL
      permissions: [READ_ALL, VERIFY]
  auditLevel: DETAILED
